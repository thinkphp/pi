<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>PI</title>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
  <style>
  body{font-family: arial,verdana;font-size:32px;}  
  input{border: 1px solid #ccc;font-size: 40px;padding: 3px;margin: 3px;text-align: center;}
  input:focus{background: #C6F7B3;color: #222;}
  </style>
  <script type="text/javascript">

  DOMhelp = {

       addEvent: function(elem,evType,fn,useCapture){

                 if(elem.addEventListener) {

                         elem.addEventListener(evType,fn,useCapture);

                 } else if(elem.attachEvent) {

                         var r = elem.attachEvent('on'+evType,fn);

                         return r;                          

                 } else {

                        elem['on'+evType] = fn; 
                 }
       }

  };


    var PI = function(epsilon) {

          //Calculates the value of PI using infinite series
          //4*(1- 1/3 + 1/5 - 1/7 + 1/9 +...)


         var v1 = 1;
 
         var v2 = parseFloat(1-1/3);

         var i = 5;

         var semn = 1;

         while(4* ( v1>v2 ? v1-v2 : v2-v1 ) >= epsilon ) {

            v1 = v2;

            v2 += semn*parseFloat(1.0/i);
 
            semn *= -1;

            i+=2;
         }     

        return (4*v2);
    };

    var solve = function() {
       
        var epsilon = parseFloat(document.getElementById('input').value);  
 
        if(!epsilon) {document.getElementById('solution').innerHTML = "Epsilon is null!";return;}

        var output = PI(epsilon);

        document.getElementById('solution').innerHTML = output;
    }

    var init = function() {

        DOMhelp.addEvent(document.getElementById('solve'),'click',solve,false); 
    }; 

    DOMhelp.addEvent(window,'load',init,false);
   
  </script>
</head>
<body>
<center>
<h1>PI</h1>
<label for="input">Dati epsilon = </label><input type="text" id="input" name="input" /><input type="button" value="PI" id="solve" name="solve">
<p id="solution"></p>
</center>
</body>
</html>